<div class="h3">Metrics</div>
<section>
    <div class="input-group search-bar">
        <input type="text" class="form-control" placeholder="Enter expression" ng-model="expression" />
        <span class="input-group-btn">
            <button class="btn btn-default" type="button" ng-click="getMetricData()">Go!</button>
        </span>
    </div>
    <br />

    <form novalidate class="form-horizontal">

    <h4>Discovery Lookup</h4>

    <div ng-show="false">Constructed metric expression:</div>

    <p>Choose your search criteria from the categories below:</p>
    
    <div class="metricFields">
        <label>Scope</label>
        <input type="text" class="form-control" placeholder="Scope" autocomplete="off" ng-model="scope"
        typeahead-min-length="2"
        typeahead-wait-ms="1500"
        uib-typeahead="result.expression for result in searchMetrics($viewValue, 'scope')"
        typeahead-template-url="scopeTemplate.html" />
        <script type="text/ng-template" id="scopeTemplate.html">
          <a class="autoComplete">
              <span ng-bind-html="match.model[match.model.category] | uibTypeaheadHighlight:query"></span>
              &nbsp;&nbsp;&nbsp;
              <span class="category">{{ match.model.category | uppercase }}</span>
              <span class="floatR">{{ match.model.expression }}</span>
          </a>
        </script>
    </div>

    <div class="metricFields">
        <label>Metric</label>
        <input type="text" class="form-control" placeholder="Metric" autocomplete="off" ng-model="metric" 
        typeahead-min-length="2"
        typeahead-wait-ms="1500"
        uib-typeahead="result.expression for result in searchMetrics($viewValue, 'metric')"
        typeahead-template-url="metricTemplate.html"
        />
        <script type="text/ng-template" id="scopeTemplate.html">
          <a class="autoComplete">
              <span ng-bind-html="match.model[match.model.category] | uibTypeaheadHighlight:query"></span>
              &nbsp;&nbsp;&nbsp;
              <span class="category">{{ match.model.category | uppercase }}</span>
              <span class="floatR">{{ match.model.expression }}</span>
          </a>
        </script>
    </div>

    <div></div>
    
    <div class="metricFields">
        <label>Tag key</label>
        <input type="text" class="form-control" placeholder="Tag key" autocomplete="off" ng-model="tagk" 
        typeahead-min-length="2"
        typeahead-wait-ms="1500"
        uib-typeahead="result.expression for result in searchMetrics($viewValue, 'tagk')"
        typeahead-template-url="tagkTemplate.html"
        />
        <script type="text/ng-template" id="scopeTemplate.html">
          <a class="autoComplete">
              <span ng-bind-html="match.model[match.model.category] | uibTypeaheadHighlight:query"></span>
              &nbsp;&nbsp;&nbsp;
              <span class="category">{{ match.model.category | uppercase }}</span>
              <span class="floatR">{{ match.model.expression }}</span>
          </a>
        </script>
    </div>
    
    <div class="metricFields">
        <label>Tag value</label>
        <input type="text" class="form-control" placeholder="Tag value" autocomplete="off" ng-model="tagv" 
        typeahead-min-length="2"
        typeahead-wait-ms="1500"
        uib-typeahead="result.expression for result in searchMetrics($viewValue, 'tagv')"
        typeahead-template-url="tagvTemplate.html"
        />
        <script type="text/ng-template" id="scopeTemplate.html">
          <a class="autoComplete">
              <span ng-bind-html="match.model[match.model.category] | uibTypeaheadHighlight:query"></span>
              &nbsp;&nbsp;&nbsp;
              <span class="category">{{ match.model.category | uppercase }}</span>
              <span class="floatR">{{ match.model.expression }}</span>
          </a>
        </script>
    </div>

    <div></div>
        
    <div class="metricFields">
        <label>Namespace</label>
        <input type="text" class="form-control" placeholder="Namespace" autocomplete="off" ng-model="namespace" 
        typeahead-min-length="2"
        typeahead-wait-ms="1500"
        uib-typeahead="result.expression for result in searchMetrics($viewValue, 'namespace')"
        typeahead-template-url="tagvTemplate.html"
        />
    </div>

    <input type="Submit" class="btn btn-default" value="Build" style="vertical-align: top; margin-top: 2.15em; margin-left: 2em;" ng-show="false" />
    
    </form>

    <div growl inline="true" reference="viewmetrics-error"></div>

    <div id="container" class="graphContainer" ng-show="showChart"></div>
</section>
